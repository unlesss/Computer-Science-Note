	将代理模式进行修改，提供拦截器机制，本质上是执行核心调用之前执行某些拦截操作

![[截屏2023-08-01 16.41.53.png]]

# 接口分析

## Interceptor 接口
	主要定义拦截器基本操作

### 源代码
![[截屏2023-08-01 16.43.51.png|600]]
### plugin 方法
	代理的包装操作

![[截屏2023-08-01 16.45.56.png]]

### Invocation参数
![[截屏2023-08-02 09.21.17.png]]
**后续代码的放行处理**
![[截屏2023-08-02 09.22.38.png]]
## 自定义拦截器

	@Interceptor

![[截屏2023-08-02 09.24.47.png|675]]

# Executor 执行拦截
	针对数据查询机制进行拦截处理

## 接口定义
	核心方法

![[截屏2023-08-02 09.32.24.png]]

## 定义拦截器
![[截屏2023-08-02 09.34.15.png|675]]

## 修改配置文件
![[截屏2023-08-02 09.41.03.png]]

# StatementHandler接口
	通过Executor接口定义方法进行调用数据操作，实际JDBC调用sql，Mybatis内部使用statementHandler接口定义具体的操作方法

![[截屏2023-08-02 09.44.33.png]]

![[截屏2023-08-02 09.47.43.png]]![[截屏2023-08-02 09.47.48.png]]

![[截屏2023-08-02 09.54.31.png]]![[截屏2023-08-02 09.55.10.png]]

## 在拦截器内部获取执行的sql语句
![[截屏2023-08-02 09.59.32.png]]

![[截屏2023-08-02 10.01.19.png]]

## 拦截器分页支持
![[截屏2023-08-02 10.01.50.png]]