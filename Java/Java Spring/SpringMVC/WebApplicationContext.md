	不使用XML文件进行配置
	
![[截屏2023-08-08 10.29.16.png]]
![[截屏2023-08-08 10.32.45.png]]



# 继承结构

## 继承ApplicationContext

![[截屏2023-08-04 10.42.19.png|825]]

## 继承其他结构

![[截屏2023-08-04 10.46.22.png|950]]
	此时表示的是Web容器上下文

![[截屏2023-08-04 10.52.49.png|1075]]
### 监听器

![[截屏2023-08-04 10.55.43.png|925]]

![[截屏2023-08-04 11.03.10.png|975]]

### 容器初始化处理

![[截屏2023-08-04 11.10.24.png]]

### 专属初始化方法
	根据ServletContext进行处理

#### InitWebApplicationContext

#### ConfigureAndRefreshWebApplicationContext

#### refresh

### 流程

![[截屏2023-08-04 11.21.16.png|1225]]
	通过这个流程流程才能实现Bean的配置

![[截屏2023-08-04 11.27.56.png]]

# 监听器启动
	删除XML文件，进行Bean配置

## SpringServletContainerInitializer定义结构

![[截屏2023-08-04 11.33.29.png]]
	SpringServletContainerInitializer实现接口，作为动态初始化的程序类

## 实现类详情

## 进行Spring容器初始化
	注解上下文启动


![[截屏2023-08-04 11.51.37.png|800]]
	硬编码，直接将容器的启动实现直接嵌入程序中，实现的结构不好，要更加清晰的描述出Bean配置Web容器的操作逻辑

## AbstractAnnotationConfigDispatcherServletInitializer 抽象类

![[截屏2023-08-04 14.24.18.png|1325]]

![[截屏2023-08-04 14.24.41.png|1350]]

	Spring的设计思想，大量重复的工作使用同一接口，继承接口使用抽象类，将功能管理细分

![[截屏2023-08-04 14.27.50.png]]

# 容器配置

## Spring上下文配置
	相当于spring-base.xml

![[截屏2023-08-04 14.31.13.png]]

## SpringWeb上下文配置
	相当于spring-mvc.xml

![[截屏2023-08-04 14.32.10.png]]

## 修改Web应用初始化配置类
	实现指定的初始化类，导入配置类

### 导入配置
![[截屏2023-08-04 14.37.02.png|675]]

### 引入过滤器
![[截屏2023-08-04 14.38.38.png|675]]

	此种配置方式，方便区分父子容器逻辑

![[截屏2023-08-04 14.44.58.png|725]]

![[截屏2023-08-04 14.46.32.png]]

# WebApplicationContextUtils

## 源代码


![[截屏2023-08-08 10.41.07.png]]

## getWebApplicationContext

![[截屏2023-08-08 10.41.55.png]]

![[截屏2023-08-08 10.43.31.png]]
  ![[截屏2023-08-08 10.45.36.png]]

## 新建接口模拟

## 创建过滤器

![[截屏2023-08-08 10.45.36 1.png]]

### 实现消息过滤
	过滤器和DispatcherServlet同等级，不属于SpringWEB容器，但是由于Web应用上下文对象，保存在了ServletContext属性范围里，所以此时可以直接获取到该对象

![[截屏2023-08-08 11.20.11.png]]

### 修改StartWEBApplication
	注册过滤器

![[截屏2023-08-08 11.23.44.png]]

![[截屏2023-08-08 11.26.12.png]]